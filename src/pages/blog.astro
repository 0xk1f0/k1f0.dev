---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.svelte";

const POSTS = await getCollection("posts");
---

<Layout title="Blog - k1f0.dev" desc="Occasional Blog Posts">
    <Header client:load />
    <div class="w-full flex flex-row overflow-scroll min-h-screen" transition:animate="fade">
        <div class="post-container w-full flex flex-col h-full max-w-screen-xl mx-auto">
            {
                POSTS.toReversed().map((post) => (
                    <article class="post listing-post">
                        <div id="listing-post-header">
                            <h2>{post.data.title}</h2>
                            <p id="listing-author-mention">
                                by <strong> {post.data.author} </strong> on
                                {new Date(post.data.date).toLocaleDateString(
                                    "en-GB",
                                )}
                            </p>
                        </div>
                        <p>{post.data.excerpt}</p>
                        <a class="btn" href={`/bp/${post.data.shortcut}`}>
                            Read More &gt
                        </a>
                    </article>
                ))
            }
        </div>
    </div>
</Layout>
